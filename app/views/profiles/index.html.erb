<!-- carousel -->
<div class="container">
  <div class="row">
    <div class="filter-bar">
      <%= render 'profiles/interest_filter' %>
    </div>
  </div>
  <div class="row">
  	<% if action_name == "search" %>
      <h1>Guides in <%= params[:search][:city].capitalize %></h1>
    <% else %>
      <h1>These are your guides</h1>
    <% end %>
  </div>
	<div class="row">
		<div class="carousel slide multi-item-carousel" id="theCarousel">
			<div class="carousel-inner">
				<% @guides.each_with_index do |guide, index| %>
				<div class="item <%= "active" if index == 0 %>">
					<div class="col-xs-4">

						<%= link_to guide.first_name, profile_path(guide), class: "img-responsive", remote: true %>
            <% if guide.photo %>
              <%= cl_image_tag guide.photo.path, width: 400, height: 300, crop: :fit, class: "card-guide" %>
            <% end %>
					</div>
				</div>
				<% end %>

			</div>
			<a class="left carousel-control" href="#theCarousel" data-slide="prev"><i class="glyphicon glyphicon-chevron-left"></i></a>
			<a class="right carousel-control" href="#theCarousel" data-slide="next"><i class="glyphicon glyphicon-chevron-right"></i></a>
		</div>
	</div>
</div>




<div id="guide-info">
	<%= render "guide_show", guide: @guides.first %>
</div>


<!-- geocode map -->

<div id="map" style="width: 100%; height: 600px;"></div>

<%= content_for(:after_js) do %>
  <%= javascript_tag do %>
    $(document).ready(function() {
      var handler = Gmaps.build('Google');
      handler.buildMap({ internal: { id: 'map' } }, function() {
        markers = handler.addMarkers(<%= raw @hash.to_json %>);
        handler.bounds.extendWith(markers);
        handler.fitMapToBounds();
        if (markers.length == 0) {
          handler.getMap().setZoom(2);
        } else if (markers.length == 1) {
          handler.getMap().setZoom(14);
        }
      });
    });
  <% end %>
<% end %>






